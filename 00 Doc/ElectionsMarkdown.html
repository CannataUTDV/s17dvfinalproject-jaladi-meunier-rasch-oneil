<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Justin Meunier, Varun Jaladi, Dylan Rasch, Sean O’neil" />


<title>Elections Data Visualization</title>

<script src="ElectionsMarkdown_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="ElectionsMarkdown_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="ElectionsMarkdown_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="ElectionsMarkdown_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="ElectionsMarkdown_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="ElectionsMarkdown_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="ElectionsMarkdown_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="ElectionsMarkdown_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="ElectionsMarkdown_files/navigation-1.1/tabsets.js"></script>
<link href="ElectionsMarkdown_files/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="ElectionsMarkdown_files/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Elections Data Visualization</h1>
<h4 class="author"><em>Justin Meunier, Varun Jaladi, Dylan Rasch, Sean O’neil</em></h4>
<h4 class="date"><em>May 2nd, 2017</em></h4>

</div>


<div id="introduction" class="section level1">
<h1><strong>Introduction</strong></h1>
<img src="introimg.jpg" />
</center>
<p><br> Our primary dataset includes electoral data, education demographics, ethnic distributions, economics, labor statistics, public health figures and crime rates for the states (excluding Alaska, including District of Columbia) of the United States. The electoral data was collected by <a href="http://www.nytimes.com/elections/results/president">The New York Times</a> and the remaining columns were aggregated by The Ulster Institute for Social Research for a <a href="">publication</a> in the <i> Open Quantitative Sociology &amp; Political Science</i> journal in 2016. Our analysis included the joining of the <a href="https://data.world/uscensusbureau">ACS 2015 Census Data</a> for Economics, Poverty and Race.</p>
<p>To download the cleaned version of this data set, visit <a href="https://data.world/vcjaladi/s-17-dv-final-project">“S17 DV Final Project”</a> published by vcjaladi on data.world. It is a private dataset, so you may request access by emailing vcjaladi@utexas.edu</p>
</div>
<div id="r-configuration" class="section level1">
<h1><strong>R Configuration</strong></h1>
<p>Below we display our sessionInfo().</p>
<pre class="r"><code>sessionInfo(package=NULL)</code></pre>
<pre><code>## R version 3.3.2 (2016-10-31)
## Platform: x86_64-apple-darwin13.4.0 (64-bit)
## Running under: macOS Sierra 10.12.4
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## loaded via a namespace (and not attached):
##  [1] backports_1.0.5 magrittr_1.5    rprojroot_1.2   tools_3.3.2    
##  [5] htmltools_0.3.5 yaml_2.1.14     Rcpp_0.12.10    stringi_1.1.2  
##  [9] rmarkdown_1.3   knitr_1.15.1    stringr_1.1.0   digest_0.6.11  
## [13] evaluate_0.10</code></pre>
</div>
<div id="the-data" class="section level1">
<h1><strong>The Data</strong></h1>
<p>Here is our data import code. To view a preview of the data, visit the data.world dataset mentioned in the introduction, or view the data summary on the first page of our shiny app, linked below.</p>
<pre class="r"><code>require(data.world)

elections = query(
  data.world(),
  dataset=&quot;vcjaladi/s-17-dv-final-project&quot;, type=&quot;sql&quot;,
  query=
    &quot;SELECT *
    FROM finalproject_ElectionsData
    LIMIT 5&quot;)

View(elections)</code></pre>
</div>
<div id="etl-script" class="section level1">
<h1><strong>ETL Script</strong></h1>
<pre class="r"><code>require(readr)
require(plyr)

# Set the Working Directory to the 00 Doc folder
file_path = &quot;../01\ Data/finalproject_ElectionsData.csv&quot;
elections &lt;- readr::read_csv(file_path)
names(elections)

# keep if rename columns df plyr::rename(hydropower, c(&quot;Resource Assessment Site ID&quot;=&quot;Site ID&quot;))
df &lt;- data.frame(elections)
names(elections)

dimensions &lt;- c(&quot;State&quot;)

measures &lt;- setdiff(names(df), dimensions)
measures

# Get rid of special characters in each column.
# Google ASCII Table to understand the following:
for(n in names(df)) {
  df[n] &lt;- data.frame(lapply(df[n], gsub, pattern=&quot;[^ -~]&quot;,replacement= &quot;&quot;))
}

if( length(dimensions) &gt; 0) {
  for(d in dimensions) {
    # Get rid of &quot; and &#39; in dimensions.
    df[d] &lt;- data.frame(lapply(df[d], gsub, pattern=&quot;[\&quot;&#39;]&quot;,replacement= &quot;&quot;))
    # Change &amp; to and in dimensions.
    df[d] &lt;- data.frame(lapply(df[d], gsub, pattern=&quot;&amp;&quot;,replacement= &quot; and &quot;))
    # Change : to ; in dimensions.
    df[d] &lt;- data.frame(lapply(df[d], gsub, pattern=&quot;:&quot;,replacement= &quot;;&quot;))
  }
}

# Get rid of all characters in measures except for numbers, the - sign, and period.dimensions, and change NA to 0.
if( length(measures) &gt; 1) {
  for(m in measures) {
    df[m] &lt;- data.frame(lapply(df[m], gsub, pattern=&quot;[^--.0-9]&quot;,replacement= &quot;&quot;))
    df[m] &lt;- data.frame(lapply(df[m], function(x) as.numeric(as.character(x)))) # This is needed to turn measures back to numeric because gsub turns them into strings.
  }
}
str(df)

write.csv(df, gsub(&quot;Elections_clean&quot;, &quot;&quot;, file_path), row.names=FALSE, na = &quot;&quot;)</code></pre>
</div>
<div id="tableau-visualizations" class="section level1">
<h1><strong>Tableau Visualizations</strong></h1>
We utilized a web connector to import our data into Tableau from data.world. We queried census data on data.world and downloaded the results as CSVs to make the import more efficient, and then joined all our tables within Tableau, as shown below. <img src="TableauJoins.png" />
</center>
<p><br><br><br></p>
<img src="Pics/Barchart.png" />
</center>
<p><br> This barchart shows a breakdown of the electoral swing states (created using a set), panelled by the victory margin they fall under. The bar represents the median income in that particular swing state. Each panel includes a reference line showing the average income for the particular victory margin. This visualization shows Hillary only won one swing state, New Hampshire, which has a higher median income than the other swing states. There isn’t a panel for a Hillary Landslide victory, further showing that she performed poorly in swing states. <br><br><br></p>
<img src="Pics/Map.png" />
</center>
<img src="Pics/MapEx2.png" />
</center>
<p><br> The above map shows the bachelor degree attainment in each state, paged by region, and labeled by victory margin. The screenshots show examples of two of the pages, though there are four total regions, which can be viewed in the Tableau workbook. An interesting correlation shown in this map is that regions with predominately Trump victories also generally have lower bachelor’s degree attainment. <br><br><br></p>
<img src="Pics/Scatterplot.png" />
</center>
<p><br> This scatterplot graphs the percentage of the population that voted democrat vs. the percentage of the population that is uninsured in each state. The points are colored and sized by a ratio of people in poverty in the given state. The trend line shows a suprising relationship - states with HIGHER uninsured rates voted democratic at LOWER rates. This again supports the idea that Hillary mainly appealed to rich voters, who were likely insured. <br><br><br></p>
<img src="Pics/Dashboard.png" />
</center>
<p><br> This dashboard puts together expanded versions of the previous 3 graphs. The bargraph is now for all states rather than just swing states. The map now shows all states rather than being paged by region. There is an action implented so that you may highlight a specific state or group of states on the barchart or map, and drill down on those states within the dashboard view. This action can be viewed within the Tableau workbook. <br><br><br></p>
<img src="Pics/Histogram.png" />
</center>
<p><br> This histogram shows the count of states with particular percentages of people with an education level below highschool. It is colored by voter turnout. It appears as though states with higher percentages of people without high school diplomas experienced far worse voter turnout. <br><br><br></p>
<img src="Pics/Boxplot.png" />
</center>
<p><br> The above boxplots show the relationship between unemployment and victory margin, split up by region. It appears that there’s no strong relationship between unemployment and victory margin, and it may not have been a key point of contention in voters’ minds during this election. <br><br><br></p>
<img src="Pics/Crosstab.png" />
</center>
<p><br> This crosstab shows median incomes in regions for each victory margin category. It is colored by median income. Again, this visualization supports the idea that Hillary won in states with more wealthy individuals, as her portion of the crosstab are much darker. <br><br><br></p>
</div>
<div id="the-shiny-application" class="section level1">
<h1><strong>The Shiny Application</strong></h1>
<br> <a href= https://justinmeunier.shinyapps.io/electionsvisualizations/> Click here to visit the shiny application. </a> <br><br> <img src="shinyscreenshot.png" />
</center>
<p><br><br><br></p>
<p>The above screenshot shows the Shiny application, which mirrors but does not exactly replicate our Tableau Visualizations. <br> The scatterplot page implements the brush feature, allowing the user to drill down and learn more about specific points of interest on the graph, expanding them into a seperate bar graph. <br> The sliders allow the user to change the margin of victory necessary for either candidate to have a “landslide” victory. Move the sliders and use the generate crosstabs button to refresh the plots.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
